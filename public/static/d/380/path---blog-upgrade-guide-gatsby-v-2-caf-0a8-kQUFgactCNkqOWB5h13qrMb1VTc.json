{"data":{"markdownRemark":{"html":"<p>Die Beta zu Gatsby v2 ist da! Im <a href=\"https://www.gatsbyjs.org/blog/2018-06-16-announcing-gatsby-v2-beta-launch/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">offiziellen Blogpost</a> kannst du die Änderungen im Detail nachlesen — kurz zusammengefasst gibt es folgendes dazu zu sagen: Das Konzept der Layouts wurde entfernt, dafür gibt es nun die <em>StaticQuery</em>. Die Dependencies wurden auf den aktuellen Stand gebracht (sprich: Babel v7, React v16 und Webpack v4), sodass das Entwickeln bzw. das <em>Hot-Reloading</em> und das Erstellen der Seite noch schneller sind. Es gab einige Änderungen, aber diese sind schnell umzusetzen! :)</p>\n<p>Wie bei allen Teilen meiner <a href=\"/tags/grb-reihe\">GRB-Reihe</a> kannst du bereits das Endresultat im Branch <a href=\"https://github.com/LeKoArts/gatsby-starter-minimal-blog/tree/tutorial-part-five\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">tutorial-part-five</a> sehen und vielleicht anhand der Commits dem Tutorial noch besser folgen. Los gehts!</p>\n<h2 id=\"gatsby-und-plugins-updaten\"><a href=\"#gatsby-und-plugins-updaten\" aria-hidden=\"true\" class=\"anchor\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 74.1 74.1\" height=\"18\" width=\"18\">\n  <path d=\"M41.5 55.3c.9 0 1.3 1.1.7 1.7L30.3 68.9c-6.9 6.9-18.2 7-25.1.1v-.1c-6.9-7-6.8-18.2.1-25.1l15.2-15.2c6.9-6.9 18.2-7 25.1-.1.6.6 1.2 1.3 1.7 2 .3.4.2.9-.1 1.3l-3.5 3.5c-1.2 1.2-2.9 1.6-4.2.5-5.2-4.8-9.1-3.8-12.3-.6L12 50.6c-3.2 3.2-3.2 8.4 0 11.6 3.2 3.2 8.4 3.1 11.6 0l8.2-8.2c.3-.3.7-.4 1.1-.2 2.7 1 5.6 1.6 8.6 1.5zM68.9 5.1c-7-6.9-18.2-6.8-25.1.1L31.9 17.1c-.6.6-.2 1.7.7 1.7 3-.1 5.9.5 8.7 1.6.4.1.8.1 1.1-.2l8.2-8.2c3.2-3.2 8.4-3.2 11.6 0 3.2 3.2 3.1 8.4 0 11.6L46.9 38.7c-3.2 3.2-8.4 3.2-11.6.1l-.4-.4c-1.2-1.4-3.3-.8-4.5.3l-3.5 3.5c-.3.3-.4.9-.1 1.3.5.7 1.1 1.4 1.7 2 7 6.9 18.2 6.8 25.1-.1l15.2-15.2c7-6.8 7-18 .1-25.1.1.1 0 .1 0 0z\"/>\n</svg>\n</a>Gatsby und Plugins updaten</h2>\n<p>Als erstes musst du die in der <code class=\"language-text\">package.json</code> hinterlegten Versionen auf <code class=\"language-text\">next</code> ändern, um die neueste Version zu erhalten.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"gatsby\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"next\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"gatsby-image\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"next\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"gatsby-plugin-sharp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"next\"</span>\n  (...weitere Plugins<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Dabei kannst du auch gleich <code class=\"language-text\">gatsby-link</code> entfernen, da dies nun in <code class=\"language-text\">gatsby</code> integriert ist. Sollte npm/yarn keine <em>next</em> Version zum npm package finden, wird es fragen, welche Version stattdessen ausgewählt werden soll — nimm hier einfach die neueste Version. Anschließend installierst du wie gewohnt mit <code class=\"language-text\">npm install</code> die Packages.</p>\n<p>Solltest du <code class=\"language-text\">gatsby-plugin-react-next</code> nutzen, kannst du dieses auch aus deiner <code class=\"language-text\">package.json</code> und <code class=\"language-text\">gatsby-config.js</code> Datei entfernen.</p>\n<h2 id=\"neue-dependencies-installieren\"><a href=\"#neue-dependencies-installieren\" aria-hidden=\"true\" class=\"anchor\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 74.1 74.1\" height=\"18\" width=\"18\">\n  <path d=\"M41.5 55.3c.9 0 1.3 1.1.7 1.7L30.3 68.9c-6.9 6.9-18.2 7-25.1.1v-.1c-6.9-7-6.8-18.2.1-25.1l15.2-15.2c6.9-6.9 18.2-7 25.1-.1.6.6 1.2 1.3 1.7 2 .3.4.2.9-.1 1.3l-3.5 3.5c-1.2 1.2-2.9 1.6-4.2.5-5.2-4.8-9.1-3.8-12.3-.6L12 50.6c-3.2 3.2-3.2 8.4 0 11.6 3.2 3.2 8.4 3.1 11.6 0l8.2-8.2c.3-.3.7-.4 1.1-.2 2.7 1 5.6 1.6 8.6 1.5zM68.9 5.1c-7-6.9-18.2-6.8-25.1.1L31.9 17.1c-.6.6-.2 1.7.7 1.7 3-.1 5.9.5 8.7 1.6.4.1.8.1 1.1-.2l8.2-8.2c3.2-3.2 8.4-3.2 11.6 0 3.2 3.2 3.1 8.4 0 11.6L46.9 38.7c-3.2 3.2-8.4 3.2-11.6.1l-.4-.4c-1.2-1.4-3.3-.8-4.5.3l-3.5 3.5c-.3.3-.4.9-.1 1.3.5.7 1.1 1.4 1.7 2 7 6.9 18.2 6.8 25.1-.1l15.2-15.2c7-6.8 7-18 .1-25.1.1.1 0 .1 0 0z\"/>\n</svg>\n</a>Neue Dependencies installieren</h2>\n<p>Im Gegensatz zu Version 1 ist in der neuen Version React nicht mehr inbegriffen und muss deshalb extra installiert werden.</p>\n<p><code class=\"language-text\">npm install react react-dom</code></p>\n<p>Auch einige Plugins haben Abhängigkeiten ausgelagert (als <em>peerDependency</em>), die manuell installiert werden müssen. Schau dazu in die README des jeweiligen Plugins, siehe z.B. <a href=\"https://gatsbyjs.org/packages/gatsby-remark-prismjs/?=prismjs\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">gatsby-remark-prismjs</a>. Bezogen auf unseren Starter müssen folgende Sachen noch installiert werden:</p>\n<p><code class=\"language-text\">npm install typography react-typography prismjs babel-plugin-styled-components</code></p>\n<h2 id=\"layout-komponente\"><a href=\"#layout-komponente\" aria-hidden=\"true\" class=\"anchor\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 74.1 74.1\" height=\"18\" width=\"18\">\n  <path d=\"M41.5 55.3c.9 0 1.3 1.1.7 1.7L30.3 68.9c-6.9 6.9-18.2 7-25.1.1v-.1c-6.9-7-6.8-18.2.1-25.1l15.2-15.2c6.9-6.9 18.2-7 25.1-.1.6.6 1.2 1.3 1.7 2 .3.4.2.9-.1 1.3l-3.5 3.5c-1.2 1.2-2.9 1.6-4.2.5-5.2-4.8-9.1-3.8-12.3-.6L12 50.6c-3.2 3.2-3.2 8.4 0 11.6 3.2 3.2 8.4 3.1 11.6 0l8.2-8.2c.3-.3.7-.4 1.1-.2 2.7 1 5.6 1.6 8.6 1.5zM68.9 5.1c-7-6.9-18.2-6.8-25.1.1L31.9 17.1c-.6.6-.2 1.7.7 1.7 3-.1 5.9.5 8.7 1.6.4.1.8.1 1.1-.2l8.2-8.2c3.2-3.2 8.4-3.2 11.6 0 3.2 3.2 3.1 8.4 0 11.6L46.9 38.7c-3.2 3.2-8.4 3.2-11.6.1l-.4-.4c-1.2-1.4-3.3-.8-4.5.3l-3.5 3.5c-.3.3-.4.9-.1 1.3.5.7 1.1 1.4 1.7 2 7 6.9 18.2 6.8 25.1-.1l15.2-15.2c7-6.8 7-18 .1-25.1.1.1 0 .1 0 0z\"/>\n</svg>\n</a>Layout Komponente</h2>\n<p>Mit dem Entfernen der <em>besonderen</em> Layout Komponente geht wohl die größte Änderung einher. Nun werden alle Seiten nicht mehr automatisch von einer Komponente umhüllt, sondern wie in der restlichen React Welt üblich umschließen wir die Seiten selber mit einer Komponente (die man praktischerweise weiterhin <em>Layout</em> nennen kann). In wenigen Schritten kann man diese Änderung aber vollziehen:</p>\n<ol>\n<li><strong>children ist keine Funktion mehr</strong></li>\n</ol>\n<p><code class=\"language-text\">children</code> wurde in v1 als Funktion weitergegeben, was nun aber nicht mehr der Fall ist.</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">  &lt;ThemeProvider theme={theme}>\n    &lt;div>\n      &lt;SEO />\n<span class=\"token deleted\">-     {children()}</span>\n<span class=\"token inserted\">+     {children}</span>\n      &lt;Footer>\n        &amp;copy; 2018 by John Doe. All rights reserved. &lt;br />\n        &lt;a href=\"https://github.com/LeKoArts/gatsby-starter-minimal-blog\">GitHub Repository&lt;/a>\n      &lt;/Footer>;\n    &lt;/div>\n  &lt;/ThemeProvider></code></pre></div>\n<ol start=\"2\">\n<li><strong>Verschiebe die Datei in deinen components Ordner</strong></li>\n</ol>\n<p>Verschiebe die Datei <code class=\"language-text\">src/layouts/index.js</code> zu <code class=\"language-text\">src/components/</code> und benenne sie in <code class=\"language-text\">Layout.js</code> um. Wenn der Komponentenname noch ein anderer seien sollte (hier: <em>TemplateWrapper</em>), nenne diesen auch um.</p>\n<ol start=\"3\">\n<li><strong>Importiere die neue Komponente</strong></li>\n</ol>\n<p>Importiere die Komponente in alle Dateien, die in den Ordnern <code class=\"language-text\">src/pages</code> und <code class=\"language-text\">src/templates</code> liegen. Bei der Gelegenheit kannst du den Import zu <code class=\"language-text\">gatsby-link</code> auch abändern. Für die <code class=\"language-text\">src/pages/index.js</code> Datei sieht das dann wie folgt aus:</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token deleted\">- import Link from 'gatsby-link';</span>\n<span class=\"token inserted\">+ import { Link } from 'gatsby';</span>\n<span class=\"token inserted\">+ import Layout from '../components/Layout';</span>\n\n/* Styling goes here */\n\nconst IndexPage = props => {\n  const postEdges = props.data.allMarkdownRemark.edges;\n\n  return (\n<span class=\"token inserted\">+   &lt;Layout></span>\n      &lt;Wrapper>\n        &lt;Hero>\n          {/* Hero Content goes here */}\n        &lt;/Hero>\n        {/* Content goes here */}\n      &lt;/Wrapper>\n<span class=\"token inserted\">+   &lt;/Layout></span>\n  );\n};</code></pre></div>\n<p>Genau so kannst du auch mit den restlichen Dateien verfahren.</p>\n<p>Falls du bislang in deiner Layout Komponente auf die props <code class=\"language-text\">history</code>, <code class=\"language-text\">location</code> oder <code class=\"language-text\">math</code> zugegriffen hast, musst du diese nun zu deiner Layout Komponente weiterreichen; da nur noch <em>pages</em> Zugriff darauf haben.</p>\n<p><strong>Beispiel</strong></p>\n<p><code class=\"language-text\">Layout.js</code></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> children<span class=\"token punctuation\">,</span> location <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>React.Fragment</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Path is </span><span class=\"token punctuation\">{</span>location<span class=\"token punctuation\">.</span>pathname<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>React.Fragment</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">src/pages/index.js</code></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/Layout.js\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> props <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Layout</span> <span class=\"token attr-name\">location</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello World</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Layout</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"neue-namen\"><a href=\"#neue-namen\" aria-hidden=\"true\" class=\"anchor\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 74.1 74.1\" height=\"18\" width=\"18\">\n  <path d=\"M41.5 55.3c.9 0 1.3 1.1.7 1.7L30.3 68.9c-6.9 6.9-18.2 7-25.1.1v-.1c-6.9-7-6.8-18.2.1-25.1l15.2-15.2c6.9-6.9 18.2-7 25.1-.1.6.6 1.2 1.3 1.7 2 .3.4.2.9-.1 1.3l-3.5 3.5c-1.2 1.2-2.9 1.6-4.2.5-5.2-4.8-9.1-3.8-12.3-.6L12 50.6c-3.2 3.2-3.2 8.4 0 11.6 3.2 3.2 8.4 3.1 11.6 0l8.2-8.2c.3-.3.7-.4 1.1-.2 2.7 1 5.6 1.6 8.6 1.5zM68.9 5.1c-7-6.9-18.2-6.8-25.1.1L31.9 17.1c-.6.6-.2 1.7.7 1.7 3-.1 5.9.5 8.7 1.6.4.1.8.1 1.1-.2l8.2-8.2c3.2-3.2 8.4-3.2 11.6 0 3.2 3.2 3.1 8.4 0 11.6L46.9 38.7c-3.2 3.2-8.4 3.2-11.6.1l-.4-.4c-1.2-1.4-3.3-.8-4.5.3l-3.5 3.5c-.3.3-.4.9-.1 1.3.5.7 1.1 1.4 1.7 2 7 6.9 18.2 6.8 25.1-.1l15.2-15.2c7-6.8 7-18 .1-25.1.1.1 0 .1 0 0z\"/>\n</svg>\n</a>Neue Namen</h2>\n<ul>\n<li>\n<p><code class=\"language-text\">boundActionCreators</code> wurde zu <code class=\"language-text\">actions</code> und <code class=\"language-text\">pathContext</code> zu <code class=\"language-text\">pageContext</code> umbenannt. Diese Namen sind u.a. in <code class=\"language-text\">gatsby-node.js</code> und den Template Dateien zu ändern.</p>\n</li>\n<li>\n<p>Die Queries <code class=\"language-text\">sizes</code> und <code class=\"language-text\">resolutions</code> der Bild-Plugins wurden auch umbenannt; die Fragments von <code class=\"language-text\">gatsby-image</code> auch. In Zukunft sind die Namen <code class=\"language-text\">fluid</code> beziehungsweise <code class=\"language-text\">fixed</code> zu nutzen. In der <a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-image\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">offiziellen Dokumentation</a> findest du alle nötigen Informationen.</p>\n</li>\n</ul>\n<h2 id=\"staticquery\"><a href=\"#staticquery\" aria-hidden=\"true\" class=\"anchor\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 74.1 74.1\" height=\"18\" width=\"18\">\n  <path d=\"M41.5 55.3c.9 0 1.3 1.1.7 1.7L30.3 68.9c-6.9 6.9-18.2 7-25.1.1v-.1c-6.9-7-6.8-18.2.1-25.1l15.2-15.2c6.9-6.9 18.2-7 25.1-.1.6.6 1.2 1.3 1.7 2 .3.4.2.9-.1 1.3l-3.5 3.5c-1.2 1.2-2.9 1.6-4.2.5-5.2-4.8-9.1-3.8-12.3-.6L12 50.6c-3.2 3.2-3.2 8.4 0 11.6 3.2 3.2 8.4 3.1 11.6 0l8.2-8.2c.3-.3.7-.4 1.1-.2 2.7 1 5.6 1.6 8.6 1.5zM68.9 5.1c-7-6.9-18.2-6.8-25.1.1L31.9 17.1c-.6.6-.2 1.7.7 1.7 3-.1 5.9.5 8.7 1.6.4.1.8.1 1.1-.2l8.2-8.2c3.2-3.2 8.4-3.2 11.6 0 3.2 3.2 3.1 8.4 0 11.6L46.9 38.7c-3.2 3.2-8.4 3.2-11.6.1l-.4-.4c-1.2-1.4-3.3-.8-4.5.3l-3.5 3.5c-.3.3-.4.9-.1 1.3.5.7 1.1 1.4 1.7 2 7 6.9 18.2 6.8 25.1-.1l15.2-15.2c7-6.8 7-18 .1-25.1.1.1 0 .1 0 0z\"/>\n</svg>\n</a>StaticQuery</h2>\n<p>Wie bereits anfangs erwähnt, gibt es nun die Möglichkeit GraphQL Queries auch in Komponenten auszuführen! Die einzige Einschränkung im Gegensatz zu Queries in <code class=\"language-text\">pages</code> Komponenten ist, dass <strong>keine</strong> Query Variablen genutzt werden können.</p>\n<p>Wir wollen nun in den Footer unseres Starters den Zeitpunkt eintragen, an dem die Seite zuletzt geupdated wurde (sprich: Auf Netlify der <code class=\"language-text\">gatsby build</code> Befehl ausgeführt wurde).</p>\n<p>Dazu fügst du dem siteMetadata Eintrag eine neue Zeile hinzu:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    buildTime<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Importiere in der Layout Komponente zuerst <em>StaticQuery</em> und setze die Komponente vor den ThemeProvider (bzw. die äußerste Komponente der Seite).</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token inserted\">+ import { StaticQuery } from 'gatsby';</span>\n\nconst Layout = props => {\n  const { children } = props;\n  return (\n<span class=\"token inserted\">+   &lt;StaticQuery /></span>\n    &lt;ThemeProvider theme={theme}>\n      &lt;React.Fragment>\n        &lt;SEO />\n        {children}\n        &lt;Footer>\n          &amp;copy; 2018 by John Doe. All rights reserved. &lt;br />\n          &lt;a href=\"https://github.com/LeKoArts/gatsby-starter-minimal-blog\">GitHub Repository&lt;/a>\n        &lt;/Footer>;\n      &lt;/React.Fragment>\n    &lt;/ThemeProvider>\n  );\n};</code></pre></div>\n<p>StaticQuery nimmt die beiden Properties <code class=\"language-text\">query</code> und <code class=\"language-text\">render</code> entgegen (die als <em>render prop</em> dienen).</p>\n<p>Definiere nun zuerst deine GraphQL Query:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token operator\">&lt;</span>StaticQuery\n  query<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>graphql<span class=\"token template-string\"><span class=\"token string\">`\n    query LayoutQuery {\n      site {\n        siteMetadata {\n          buildTime\n        }\n      }\n    }\n  `</span></span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>Anschließend fügst du den ursprünglichen Inhalt der Seite in die <code class=\"language-text\">render</code> property ein. Dabei kann man wie gewohnt auf <em>data</em> zugreifen:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Layout</span> <span class=\"token operator\">=</span> props <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>StaticQuery\n      query<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>graphql<span class=\"token template-string\"><span class=\"token string\">`\n        query LayoutQuery {\n          site {\n            siteMetadata {\n              buildTime\n            }\n          }\n        }\n      `</span></span><span class=\"token punctuation\">}</span>\n      render<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ThemeProvider</span> <span class=\"token attr-name\">theme</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>theme<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>React.Fragment</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SEO</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n            </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Footer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              &amp;copy; 2018 by John Doe. All rights reserved. </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://github.com/LeKoArts/gatsby-starter-minimal-blog<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">GitHub Repository</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n              </span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>siteMetadata<span class=\"token punctuation\">.</span>buildTime<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Footer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">;\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>React.Fragment</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ThemeProvider</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Mit <code class=\"language-text\">data.site.siteMetadata.buildTime</code> kannst du auf die Daten der Query zugreifen.</p>\n<h2 id=\"mehr-informationen\"><a href=\"#mehr-informationen\" aria-hidden=\"true\" class=\"anchor\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 74.1 74.1\" height=\"18\" width=\"18\">\n  <path d=\"M41.5 55.3c.9 0 1.3 1.1.7 1.7L30.3 68.9c-6.9 6.9-18.2 7-25.1.1v-.1c-6.9-7-6.8-18.2.1-25.1l15.2-15.2c6.9-6.9 18.2-7 25.1-.1.6.6 1.2 1.3 1.7 2 .3.4.2.9-.1 1.3l-3.5 3.5c-1.2 1.2-2.9 1.6-4.2.5-5.2-4.8-9.1-3.8-12.3-.6L12 50.6c-3.2 3.2-3.2 8.4 0 11.6 3.2 3.2 8.4 3.1 11.6 0l8.2-8.2c.3-.3.7-.4 1.1-.2 2.7 1 5.6 1.6 8.6 1.5zM68.9 5.1c-7-6.9-18.2-6.8-25.1.1L31.9 17.1c-.6.6-.2 1.7.7 1.7 3-.1 5.9.5 8.7 1.6.4.1.8.1 1.1-.2l8.2-8.2c3.2-3.2 8.4-3.2 11.6 0 3.2 3.2 3.1 8.4 0 11.6L46.9 38.7c-3.2 3.2-8.4 3.2-11.6.1l-.4-.4c-1.2-1.4-3.3-.8-4.5.3l-3.5 3.5c-.3.3-.4.9-.1 1.3.5.7 1.1 1.4 1.7 2 7 6.9 18.2 6.8 25.1-.1l15.2-15.2c7-6.8 7-18 .1-25.1.1.1 0 .1 0 0z\"/>\n</svg>\n</a>Mehr Informationen</h2>\n<p>Mit dem Upgrade auf Version 2 haben sich noch einige andere Dinge geändert — mit diesem Blogeintrag wollte ich die wichtigsten Sachen abdecken. Deshalb empfehle ich einen Blick in das <a href=\"https://next.gatsbyjs.org/docs/migrating-from-v1-to-v2/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">offizielle Migration Dokument</a> zu werfen, wenn du bspw. auch Änderungen an Babel vorgenommen hast oder deine Bilder per ID filterst.</p>","timeToRead":6,"excerpt":"Die Beta zu Gatsby v2 ist da! Im  offiziellen Blogpost  kannst du die Änderungen im Detail nachlesen — kurz zusammengefasst gibt es…","frontmatter":{"title":"Upgrade-Guide: Gatsby v2","date":"17. Juni 2018","category":"Coding","tags":["Gatsby","GRB-Reihe"],"cover":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEE/8QAFgEBAQEAAAAAAAAAAAAAAAAABAAB/9oADAMBAAIQAxAAAAHQoLAy/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQABBQJf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAFxAAAwEAAAAAAAAAAAAAAAAAAAERIP/aAAgBAQABPyFlz//aAAwDAQACAAMAAAAQhD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAQUAAAAAAAAAAAAAAAABEQAgIWGR/9oACAEBAAE/EEkRG6EuA7b/AP/Z","aspectRatio":1.7777777777777777,"src":"/static/gatsby-version-2-8c66b4acaca2e5ccfa0282b038b7cbe1-e192e.jpg","srcSet":"/static/gatsby-version-2-8c66b4acaca2e5ccfa0282b038b7cbe1-0380a.jpg 480w,\n/static/gatsby-version-2-8c66b4acaca2e5ccfa0282b038b7cbe1-405ab.jpg 960w,\n/static/gatsby-version-2-8c66b4acaca2e5ccfa0282b038b7cbe1-e192e.jpg 1920w","srcWebp":"/static/gatsby-version-2-8c66b4acaca2e5ccfa0282b038b7cbe1-5b08a.webp","srcSetWebp":"/static/gatsby-version-2-8c66b4acaca2e5ccfa0282b038b7cbe1-92359.webp 480w,\n/static/gatsby-version-2-8c66b4acaca2e5ccfa0282b038b7cbe1-d9936.webp 960w,\n/static/gatsby-version-2-8c66b4acaca2e5ccfa0282b038b7cbe1-5b08a.webp 1920w","sizes":"(max-width: 1920px) 100vw, 1920px"},"resize":{"src":"/static/gatsby-version-2-8c66b4acaca2e5ccfa0282b038b7cbe1-d260a.jpg"}}}},"fields":{"slug":"/blog/upgrade-guide-gatsby-v-2","sourceInstanceName":"blog"}}},"pageContext":{"slug":"/blog/upgrade-guide-gatsby-v-2","left":{"frontmatter":{"tags":["Gatsby","Gatsby-Starter"],"category":"Coding","title":"Gatsby Starter Portfolio","cover":{"childImageSharp":{"resize":{"src":"/static/gatsby_starter_portfolio-d4da4203ecbce8c093f317d78b4a9e77-735d8.jpg"}}}},"fields":{"slug":"/blog/gatsby-starter-portfolio"}},"right":{"frontmatter":{"tags":["Netlify","Discord"],"category":"Quicktipp","title":"Quicktipp: Netlify + Discord","cover":{"childImageSharp":{"resize":{"src":"/static/netlify-and-discord-1c11979b664a737c4d748b895d4507a7-735d8.jpg"}}}},"fields":{"slug":"/blog/quicktipp-netlify-discord"}}}}